import{_ as s,c as a,o as n,d as l}from"./app.aaf32ca6.js";const C=JSON.parse('{"title":"\u6D4F\u89C8\u5668\u5B89\u5168\u7B56\u7565","description":"","frontmatter":{},"headers":[{"level":2,"title":"\u540C\u6E90\u7B56\u7565","slug":"\u540C\u6E90\u7B56\u7565"},{"level":2,"title":"\u8DE8\u57DF","slug":"\u8DE8\u57DF"},{"level":2,"title":"JSONP","slug":"jsonp"},{"level":2,"title":"CORS","slug":"cors"},{"level":2,"title":"iframe\u7CFB\u5217","slug":"iframe\u7CFB\u5217"},{"level":2,"title":"postMessage","slug":"postmessage"},{"level":2,"title":"WebSocket\u534F\u8BAE\u8DE8\u57DF","slug":"websocket\u534F\u8BAE\u8DE8\u57DF"},{"level":2,"title":"\u670D\u52A1\u7AEF\u8BBE\u7F6E\u4EE3\u7406\u6A21\u5757","slug":"\u670D\u52A1\u7AEF\u8BBE\u7F6E\u4EE3\u7406\u6A21\u5757"},{"level":2,"title":"\u4F7F\u7528Flash\u8DE8\u57DF","slug":"\u4F7F\u7528flash\u8DE8\u57DF"}],"relativePath":"summary/\u8DE8\u57DF\u89E3\u51B3\u65B9\u6848\u603B\u7ED3.md"}'),p={name:"summary/\u8DE8\u57DF\u89E3\u51B3\u65B9\u6848\u603B\u7ED3.md"},o=l(`<h1 id="\u6D4F\u89C8\u5668\u5B89\u5168\u7B56\u7565" tabindex="-1">\u6D4F\u89C8\u5668\u5B89\u5168\u7B56\u7565 <a class="header-anchor" href="#\u6D4F\u89C8\u5668\u5B89\u5168\u7B56\u7565" aria-hidden="true">#</a></h1><h2 id="\u540C\u6E90\u7B56\u7565" tabindex="-1">\u540C\u6E90\u7B56\u7565 <a class="header-anchor" href="#\u540C\u6E90\u7B56\u7565" aria-hidden="true">#</a></h2><ul><li>\u542B\u4E49 \u6240\u8C13\u7684\u540C\u6E90\uFF0C\u6307\u7684\u662F\u534F\u8BAE\uFF0C\u57DF\u540D\uFF0C\u7AEF\u53E3\u76F8\u540C\u3002\u6D4F\u89C8\u5668\u51FA\u4E8E\u5B89\u5168\u65B9\u9762\u7684\u8003\u8651\uFF0C\u53EA\u5141\u8BB8\u672C\u57DF\u540D\u4E0B\u7684\u63A5\u53E3\u4EA4\u4E92\uFF0C\u4E0D\u540C\u6E90\u7684\u5BA2\u6237\u7AEF\u811A\u672C\uFF0C\u5728\u6CA1\u6709\u660E\u786E\u6388\u6743\u7684\u60C5\u51B5\u4E0B\uFF0C\u4E0D\u80FD\u8BFB\u5199\u5BF9\u65B9\u7684\u8D44\u6E90\u3002</li><li>\u5F15\u53D1\u7684\u95EE\u9898 -- cookie\u3001localstorage \u548C indexDB \u65E0\u6CD5\u8BFB\u53D6 -- DOM \u65E0\u6CD5\u83B7\u5F97 -- Ajax \u8BF7\u6C42\u4E0D\u80FD\u53D1\u9001</li></ul><h2 id="\u8DE8\u57DF" tabindex="-1">\u8DE8\u57DF <a class="header-anchor" href="#\u8DE8\u57DF" aria-hidden="true">#</a></h2><p>\u8FDD\u6CD5\u540C\u6E90\u7B56\u7565\u5C31\u662F\u8DE8\u57DF\u4E86\u3002</p><ul><li>\u5E7F\u4E49\u7684\u8DE8\u57DF -- \u8D44\u6E90\u8DF3\u8F6C\uFF1AA\u94FE\u63A5\u3001\u91CD\u5B9A\u5411\u3001\u8868\u5355\u63D0\u4EA4 -- \u8D44\u6E90\u5D4C\u5165\uFF1Alink,script,img,frame\u7B49dom\u6807\u7B7E\uFF0C\u8FD8\u6709\u6837\u5F0F\u4E2Dbackground:url(),@font-face\u7B49\u6587\u4EF6\u5916\u94FE\u3002 -- \u811A\u672C\u8BF7\u6C42\uFF1Ajs\u53D1\u8D77\u7684ajax\u8BF7\u6C42\u3001dom\u548Cjs\u5BF9\u8C61\u7684\u8DE8\u57DF\u64CD\u4F5C\u7B49</li><li>\u72ED\u4E49\u7684\u8DE8\u57DF\u7684\u60C5\u51B5\u793A\u4F8B \u4EE5<strong>http:// <a href="http://www.xn--mi7c.com/dir/a.html" target="_blank" rel="noopener noreferrer">www.\uFF41.com/dir/a.html</a></strong>\u4E3A\u4F8B\uFF0C\u5E38\u89C1\u7684\u51E0\u79CD\u8DE8\u57DF\u60C5\u51B5: <img src="https://img-blog.csdnimg.cn/20200805195504858.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjkyNTE2OQ==,size_16,color_FFFFFF,t_70" alt="\u5728\u8FD9\u91CC\u63D2\u5165\u56FE\u7247\u63CF\u8FF0"></li></ul><h1 id="\u89E3\u51B3\u65B9\u6848" tabindex="-1">\u89E3\u51B3\u65B9\u6848 <a class="header-anchor" href="#\u89E3\u51B3\u65B9\u6848" aria-hidden="true">#</a></h1><h2 id="jsonp" tabindex="-1">JSONP <a class="header-anchor" href="#jsonp" aria-hidden="true">#</a></h2><h5 id="\u5B9E\u73B0\u539F\u7406" tabindex="-1">\u5B9E\u73B0\u539F\u7406 <a class="header-anchor" href="#\u5B9E\u73B0\u539F\u7406" aria-hidden="true">#</a></h5><p>script \u6807\u7B7E\u7684src\u5C5E\u6027\u53EF\u4EE5\u8DE8\u57DF\u5F15\u7528\u6587\u4EF6(\u7C7B\u4F3C\u7684\u8FD8\u6709img\uFF0Ciframe\u4E5F\u6709\u8FD9\u6837\u7684\u7279\u6027)\uFF0Cjsonp\u7684\u539F\u7406\u5C31\u662F\u5229\u7528\u6807\u7B7E\u6CA1\u6709\u8DE8\u57DF\u9650\u5236\u3002\u5728HTML\u4E2D\u52A8\u6001\u63D2\u5165script\u6807\u7B7E\uFF0C\u901A\u8FC7script\u6807\u7B7E\u5F15\u5165js\u6587\u4EF6\uFF0C\u8FD9\u4E2Ajs\u6587\u4EF6\u8F7D\u5165\u6210\u529F\u540E\u4F1A\u6267\u884C\u5728url\u53C2\u6570\u4E2D\u6307\u5B9A\u7684\u51FD\u6570\uFF0C\u5E76\u4E14\u4F1A\u628A\u9700\u8981\u7684JSON\u6570\u636E\u4F5C\u4E3A\u53C2\u6570\u4F20\u5165\u3002</p><h5 id="\u793A\u4F8B\u4EE3\u7801\uFF1A" tabindex="-1">\u793A\u4F8B\u4EE3\u7801\uFF1A <a class="header-anchor" href="#\u793A\u4F8B\u4EE3\u7801\uFF1A" aria-hidden="true">#</a></h5><ul><li>\u539F\u751FJS\u5B9E\u73B0</li></ul><div class="language-javascript"><span class="copy"></span><pre><code><span class="line"><span style="color:#676E95;font-style:italic;">//\u524D\u7AEF\u7684\u4EE3\u7801\uFF0C\u6CE8\u610F\u51FD\u6570handle()</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;!</span><span style="color:#A6ACCD;">DOCTYPE html</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">html</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">lang</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">en</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">head</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">meta</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">charset</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">UTF-8</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">meta</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">name</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">viewport</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">content</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">width=device-width, initial-scale=1.0</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">title</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">Document</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">title</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">style</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">        #result</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">            width: 200px;</span></span>
<span class="line"><span style="color:#A6ACCD;">            height: 100px;</span></span>
<span class="line"><span style="color:#A6ACCD;">            border: solid 1px #90b;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">style</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">head</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">body</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">div</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">id</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">result</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;&lt;/</span><span style="color:#F07178;">div</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">script</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">        //\u5904\u7406\u6570\u636E</span></span>
<span class="line"><span style="color:#A6ACCD;">        function handle(data)</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">            const result </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> document</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">querySelector</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">#result</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">            result</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">innerHTML </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> data</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">name</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">script</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">script</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">src</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">http://127.0.0.1:8000/jsonp-server</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;&lt;/</span><span style="color:#F07178;">script</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">body</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">html</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span></code></pre></div><div class="language-javascript"><span class="copy"></span><pre><code><span class="line"><span style="color:#676E95;font-style:italic;">//\u540E\u53F0\u4EE3\u7801\uFF1A\u7528express\u642D\u5EFA\u7684\u4E00\u4E2A\u7B80\u5355\u540E\u53F0</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">//1.\u5F15\u5165express</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> express </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">require</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">express</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">//2.\u521B\u5EFA\u5E94\u7528\u5BF9\u8C61</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> app </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">express</span><span style="color:#A6ACCD;">()</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">//3.\u521B\u5EFA\u8DEF\u7531\u89C4\u5219</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">//request\u662F\u5BF9\u8BF7\u6C42\u62A5\u6587\u7684\u5C01\u88C5</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">//response\u662F\u5BF9\u54CD\u5E94\u62A5\u6587\u7684\u5C01\u88C5</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">//jsonp\u670D\u52A1</span></span>
<span class="line"><span style="color:#A6ACCD;">app</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">all</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">/jsonp-server</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,(</span><span style="color:#A6ACCD;">request</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">response</span><span style="color:#89DDFF;">)</span><span style="color:#C792EA;">=&gt;</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">data</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;">name</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">123</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">str</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">JSON</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">stringify</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">data</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//\u8BBE\u7F6E\u54CD\u5E94\u4F53</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// response.send(&#39;Hello jQuery Ajax&#39;)</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">response</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">send</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">handle(</span><span style="color:#89DDFF;">\${</span><span style="color:#A6ACCD;">str</span><span style="color:#89DDFF;">}</span><span style="color:#C3E88D;">)</span><span style="color:#89DDFF;">\`</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">) </span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">//4.\u76D1\u542C\u7AEF\u53E3\u542F\u52A8\u670D\u52A1</span></span>
<span class="line"><span style="color:#A6ACCD;">app</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">listen</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">8000</span><span style="color:#89DDFF;">,()</span><span style="color:#C792EA;">=&gt;</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">\u670D\u52A1\u5DF2\u542F\u52A8\uFF0C8000\u7AEF\u53E3\u76D1\u542C\u4E2D......</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span></code></pre></div><ul><li>jQuery\u5B9E\u73B0</li></ul><div class="language-javascript"><span class="copy"></span><pre><code><span class="line"><span style="color:#676E95;font-style:italic;">//\u524D\u7AEF\u9875\u9762</span></span>
<span class="line"><span style="color:#82AAFF;">$</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">button</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">eq</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">click</span><span style="color:#A6ACCD;">(</span><span style="color:#C792EA;">function</span><span style="color:#89DDFF;">(){</span></span>
<span class="line"><span style="color:#F07178;">            </span><span style="color:#A6ACCD;">$</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getJSON</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">http://127.0.0.1:8000/jquery-jsonp-server?callback=?</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#C792EA;">function</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">data</span><span style="color:#89DDFF;">){</span></span>
<span class="line"><span style="color:#F07178;">                </span><span style="color:#82AAFF;">$</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">#result</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">html</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">\`</span></span>
<span class="line"><span style="color:#C3E88D;">                    \u540D\u79F0\uFF1A</span><span style="color:#89DDFF;">\${</span><span style="color:#A6ACCD;">data</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">name</span><span style="color:#89DDFF;">}</span><span style="color:#C3E88D;">&lt;br/&gt;</span></span>
<span class="line"><span style="color:#C3E88D;">                    \u6821\u533A\uFF1A</span><span style="color:#89DDFF;">\${</span><span style="color:#A6ACCD;">data</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">city</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#C3E88D;">                </span><span style="color:#89DDFF;">\`</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">            </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span></code></pre></div><div class="language-javascript"><span class="copy"></span><pre><code><span class="line"><span style="color:#676E95;font-style:italic;">//\u540E\u7AEF\u4EE3\u7801</span></span>
<span class="line"><span style="color:#A6ACCD;">app</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">all</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">/jquery-jsonp-server</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,(</span><span style="color:#A6ACCD;">request</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">response</span><span style="color:#89DDFF;">)</span><span style="color:#C792EA;">=&gt;</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">data</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">        name</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">ajin</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">        city</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;">[</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">\u5317\u4EAC</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">\u4E0A\u6D77</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">\u6DF1\u5733</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">]</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">str</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">JSON</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">stringify</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">data</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">cb</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">request</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">query</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">callback</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">response</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">send</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">\`\${</span><span style="color:#A6ACCD;">cb</span><span style="color:#89DDFF;">}</span><span style="color:#C3E88D;">(</span><span style="color:#89DDFF;">\${</span><span style="color:#A6ACCD;">str</span><span style="color:#89DDFF;">}</span><span style="color:#C3E88D;">)</span><span style="color:#89DDFF;">\`</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span></code></pre></div><h5 id="\u4F18\u70B9" tabindex="-1">\u4F18\u70B9 <a class="header-anchor" href="#\u4F18\u70B9" aria-hidden="true">#</a></h5><p>\u4E0D\u53D7\u540C\u6E90\u7B56\u7565\u7684\u9650\u5236\uFF1B \u517C\u5BB9\u6027\u66F4\u597D\uFF0C\u5728\u66F4\u52A0\u53E4\u8001\u7684\u6D4F\u89C8\u5668\u4E2D\u90FD\u53EF\u4EE5\u8FD0\u884C\uFF1B \u8BF7\u6C42\u5B8C\u6BD5\u540E\u53EF\u4EE5\u901A\u8FC7\u8C03\u7528callback\u7684\u65B9\u5F0F\u56DE\u4F20\u7ED3\u679C\u3002</p><h5 id="\u7F3A\u70B9" tabindex="-1">\u7F3A\u70B9 <a class="header-anchor" href="#\u7F3A\u70B9" aria-hidden="true">#</a></h5><p>\u53EA\u652F\u6301GET\u8BF7\u6C42\u800C\u4E0D\u652F\u6301POST\u7B49\u5176\u5B83\u7C7B\u578B\u7684HTTP\u8BF7\u6C42\uFF1B \u5B83\u53EA\u652F\u6301\u8DE8\u57DFHTTP\u8BF7\u6C42\u8FD9\u79CD\u60C5\u51B5\u3002(\u4E0D\u80FD\u89E3\u51B3\u4E0D\u540C\u57DF\u7684\u4E24\u4E2A\u9875\u9762\u4E4B\u95F4\u5982\u4F55\u8FDB\u884CJavaScript\u8C03\u7528\u7684\u95EE\u9898) jsonp\u5728\u8C03\u7528\u5931\u8D25\u7684\u65F6\u5019\u4E0D\u4F1A\u8FD4\u56DE\u5404\u79CDHTTP\u72B6\u6001\u7801 \u6709\u5B89\u5168\u95EE\u9898\u3002\u4E07\u4E00\u5047\u5982\u63D0\u4F9Bjsonp\u7684\u670D\u52A1\u5B58\u5728\u9875\u9762\u6CE8\u5165\u6F0F\u6D1E\u5373\u5B83\u8FD4\u56DE\u7684javascript\u7684\u5185\u5BB9\u88AB\u4EBA\u63A7\u5236\u7684\u3002</p><h5 id="\u9002\u7528\u573A\u666F" tabindex="-1">\u9002\u7528\u573A\u666F <a class="header-anchor" href="#\u9002\u7528\u573A\u666F" aria-hidden="true">#</a></h5><p>\u7B80\u5355\u5730\u8DE8\u57DF\u8BF7\u6C42jsonp\u5373\u53EF\u3002</p><h2 id="cors" tabindex="-1">CORS <a class="header-anchor" href="#cors" aria-hidden="true">#</a></h2><h5 id="\u5B9E\u73B0\u539F\u7406-1" tabindex="-1">\u5B9E\u73B0\u539F\u7406 <a class="header-anchor" href="#\u5B9E\u73B0\u539F\u7406-1" aria-hidden="true">#</a></h5><p>\u8DE8\u57DF\u8D44\u6E90\u5171\u4EAB\uFF1A\u53EA\u7528\u5728\u670D\u52A1\u7AEF\u8BBE\u7F6E==Access-Control-Allow-Origin==\u5373\u53EF\uFF0C\u524D\u7AEF\u65E0\u987B\u8BBE\u7F6E\uFF0C\u82E5\u8981\u5E26cookie\u8BF7\u6C42\uFF1A\u524D\u540E\u7AEF\u90FD\u9700\u8981\u8BBE\u7F6E\u3002</p><blockquote><p>\u6CE8\u610F\uFF1A\u7531\u4E8E\u540C\u6E90\u7B56\u7565\u7684\u9650\u5236\uFF0C\u6240\u8BFB\u53D6\u7684cookie\u4E3A\u8DE8\u57DF\u63A5\u53E3\u6240\u5728\u57DF\u7684cookie\uFF0C\u800C\u975E\u5F53\u524D\u9875\u3002\u5982\u679C\u60F3\u5B9E\u73B0\u5F53\u524D\u9875\u7684cookie\u7684\u5199\u5165\uFF0C\u53EF\u4EE5\u8BBE\u7F6EwithCredentials\u3002\u6BD4\u5982\u5728\u524D\u7AEF\u8BBE\u7F6Exhr.withCredentials = true;</p></blockquote><p>CORS\u4E2D\u4E24\u4E2A\u91CD\u8981\u6982\u5FF5</p><ul><li>==\u7B80\u5355\u8BF7\u6C42\u4E0E\u590D\u6742\u8BF7\u6C42== \u540C\u65F6\u6EE1\u8DB3\u4EE5\u4E0B\u6761\u4EF6\u7684\u8BF7\u6C42\u5373\u4E3A\u7B80\u5355\u8BF7\u6C42\uFF0C\u5426\u5219\u5373\u4E3A\u590D\u6742\u8BF7\u6C42\uFF1A -- \u8BF7\u6C42\u65B9\u5F0F\uFF1AHEAD\uFF0CGET\uFF0CPOST -- \u8BF7\u6C42\u5934\u4FE1\u606F\uFF1AAccept\u3001Accept-Language\u3001Content-Language\u3001Last-Event-ID\u3001Content-Type(\u5176\u4E2D\u5BF9\u5E94\u7684\u503C\u53EA\u80FD\u662F\u4EE5\u4E0B\u4E09\u4E2A\u4E2D\u7684\u4EFB\u610F\u4E00\u4E2A\uFF1Aapplication/x-www-form-urlencoded\u3001multipart/form-data\u3001text/plain)</li><li>\u4E24\u79CD\u8BF7\u6C42\u7684\u533A\u522B <ul><li>\u7B80\u5355\u8BF7\u6C42\uFF1A\u4E00\u6B21\u8BF7\u6C42</li><li>\u590D\u6742\u8BF7\u6C42\uFF1A\u4E24\u6B21\u8BF7\u6C42\uFF0C\u5728\u53D1\u9001\u6570\u636E\u4E4B\u524D\u4F1A\u5148\u53D1\u7B2C\u4E00\u6B21\u8BF7\u6C42\u505A\u2018<strong>\u9884\u68C0</strong>\u2019\uFF0C\u53EA\u6709\u2018\u9884\u68C0\u2019\u901A\u8FC7\u540E\u624D\u518D\u53D1\u9001\u4E00\u6B21\u8BF7\u6C42\u7528\u4E8E\u6570\u636E\u4F20\u8F93\u3002</li></ul></li><li>\u5173\u4E8E\u9884\u68C0 <ul><li>\u8BF7\u6C42\u65B9\u5F0F\uFF1Aoptions</li><li>\u201C\u9884\u68C0\u201D\u5176\u5B9E\u505A\u68C0\u67E5\uFF0C\u68C0\u67E5\u5982\u679C\u901A\u8FC7\u5219\u5141\u8BB8\u4F20\u8F93\u6570\u636E\uFF0C\u68C0\u67E5\u4E0D\u901A\u8FC7\u5219\u4E0D\u518D\u53D1\u9001\u771F\u6B63\u60F3\u8981\u53D1\u9001\u7684\u6D88\u606F</li><li>\u5982\u4F55\u9884\u68C0\uFF1A <ul><li>\u5982\u679C\u590D\u6742\u8BF7\u6C42\u662FPUT\u7B49\u8BF7\u6C42\uFF0C\u5219\u670D\u52A1\u7AEF\u9700\u8981\u8BBE\u7F6E\u5141\u8BB8\u67D0\u8BF7\u6C42\uFF0C\u5426\u5219\u201C\u9884\u68C0\u201D\u4E0D\u901A\u8FC7\uFF1AAccess-Control-Request-Method\u3001</li><li>\u5982\u679C\u590D\u6742\u8BF7\u6C42\u8BBE\u7F6E\u4E86\u8BF7\u6C42\u5934\uFF0C\u5219\u670D\u52A1\u7AEF\u9700\u8981\u8BBE\u7F6E\u5141\u8BB8\u67D0\u8BF7\u6C42\u5934\uFF0C\u5426\u5219\u201C\u9884\u68C0\u201D\u4E0D\u901A\u8FC7\uFF1AAccess-Control-Request-Headers</li></ul></li></ul></li></ul><p>Access-Control-Allow-Origin\u8868\u793A\u5141\u8BB8\u54EA\u4E2A\u57DF\u7684\u8BF7\u6C42\uFF0C\u6709\u591A\u79CD\u8BBE\u7F6E\u65B9\u6CD5\uFF1A</p><ul><li>\u8BBE\u7F6E<em>\u662F\u6700\u7B80\u5355\u7C97\u66B4\u7684\uFF0C\u4F46\u662F\u670D\u52A1\u5668\u51FA\u4E8E\u5B89\u5168\u8003\u8651\uFF0C\u80AF\u5B9A\u4E0D\u4F1A\u8FD9\u4E48\u5E72\uFF0C\u800C\u4E14\uFF0C\u5982\u679C\u662F</em>\u7684\u8BDD\uFF0C\u6E38\u89C8\u5668\u5C06\u4E0D\u4F1A\u53D1\u9001cookie\uFF0C\u5373\u4F7F\u4F60\u7684XHR\u8BBE\u7F6E\u4E86withCredentials</li><li>\u6307\u5B9A\u57DF\uFF0C\u5982\u6307\u5B9Ahttp://172.20.0.206\u4E4B\u7C7B\u7684</li><li>\u52A8\u6001\u8BBE\u7F6E\u4E3A\u8BF7\u6C42\u57DF\uFF0C\u591A\u4EBA\u534F\u4F5C\u65F6\uFF0C\u591A\u4E2A\u524D\u7AEF\u5BF9\u63A5\u4E00\u4E2A\u540E\u53F0\uFF0C\u8FD9\u6837\u5F88\u65B9\u4FBF</li></ul><h5 id="\u793A\u4F8B\u4EE3\u7801" tabindex="-1">\u793A\u4F8B\u4EE3\u7801 <a class="header-anchor" href="#\u793A\u4F8B\u4EE3\u7801" aria-hidden="true">#</a></h5><div class="language-javascript"><span class="copy"></span><pre><code><span class="line"><span style="color:#676E95;font-style:italic;">//cors\u670D\u52A1</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">//\u82E5\u540E\u7AEF\u8BBE\u7F6E\u6210\u529F\uFF0C\u524D\u7AEF\u6D4F\u89C8\u5668\u63A7\u5236\u53F0\u5219\u4E0D\u4F1A\u51FA\u73B0\u8DE8\u57DF\u62A5\u9519\u4FE1\u606F\uFF0C\u53CD\u4E4B\uFF0C\u8BF4\u660E\u6CA1\u8BBE\u6210\u529F\u3002</span></span>
<span class="line"><span style="color:#A6ACCD;">app</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">all</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">/cors-server</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,(</span><span style="color:#A6ACCD;">request</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">response</span><span style="color:#89DDFF;">)</span><span style="color:#C792EA;">=&gt;</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//\u8BBE\u7F6E\u54CD\u5E94\u5934  \u8BBE\u7F6E\u5141\u8BB8\u8DE8\u57DF Access-Control-Allow-Origin</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">response</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">setHeader</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Access-Control-Allow-Origin</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">*</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">response</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">setHeader</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Access-Control-Allow-Headers</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">*</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// \u5141\u8BB8\u8DE8\u57DF\u8BBF\u95EE\u7684\u57DF\u540D\uFF1A\u82E5\u6709\u7AEF\u53E3\u9700\u5199\u5168\uFF08\u534F\u8BAE+\u57DF\u540D+\u7AEF\u53E3\uFF09\uFF0C\u82E5\u6CA1\u6709\u7AEF\u53E3\u672B\u5C3E\u4E0D\u7528\u52A0&#39;/&#39;</span></span>
<span class="line"><span style="color:#89DDFF;">	</span><span style="color:#676E95;font-style:italic;">// response.setHeader(&quot;Access-Control-Allow-Origin&quot;, &quot;http://www.domain1.com&quot;);</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">response</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">send</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">hello cors!</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">) </span></span>
<span class="line"></span></code></pre></div><h5 id="\u4F18\u70B9-1" tabindex="-1">\u4F18\u70B9 <a class="header-anchor" href="#\u4F18\u70B9-1" aria-hidden="true">#</a></h5><p>JSONP\u548CCORS\u4E24\u8005\u4F18\u70B9\u548C\u7F3A\u70B9\u5927\u81F4\u4E92\u8865\uFF0C\u6240\u4EE5CORS\u7684\u4F18\u70B9\u4E3B\u8981\u6709\uFF1A</p><ul><li>CORS\u4E0EJSONP\u7684\u4F7F\u7528\u76EE\u7684\u76F8\u540C\u4F46\u662F\u6BD4JSONP\u66F4\u5F3A\u5927\u3002JSONP\u53EA\u652F\u6301GET\u8BF7\u6C42\uFF0CCORS\u652F\u6301\u6240\u6709\u7C7B\u578B\u7684HTTP\u8BF7\u6C42\u3002JSONP\u7684\u4F18\u52BF\u5728\u4E8E\u652F\u6301\u8001\u5F0F\u6D4F\u89C8\u5668\u4EE5\u53CA\u53EF\u4EE5\u5411\u4E0D\u652F\u6301CORS\u7684\u7F51\u7AD9\u8BF7\u6C42\u6570\u636E\u3002</li><li>JSONP\u7684\u9519\u8BEF\u5904\u7406\u673A\u5236\u5E76\u4E0D\u5B8C\u5584\uFF0C\u6211\u4EEC\u6CA1\u529E\u6CD5\u8FDB\u884C\u9519\u8BEF\u5904\u7406\uFF1B\u800CCORS\u53EF\u4EE5\u901A\u8FC7onerror\u4E8B\u4EF6\u76D1\u542C\u9519\u8BEF\uFF0C\u5E76\u4E14\u6D4F\u89C8\u5668\u63A7\u5236\u53F0\u4F1A\u770B\u5230\u62A5\u9519\u4FE1\u606F\uFF0C\u5229\u4E8E\u6392\u67E5\u3002</li><li>JSONP\u53EA\u4F1A\u53D1\u4E00\u6B21\u8BF7\u6C42\uFF1B\u800C\u5BF9\u4E8E\u590D\u6742\u8BF7\u6C42\uFF0CCORS\u4F1A\u53D1\u4E24\u6B21\u8BF7\u6C42\u3002</li></ul><h5 id="\u7F3A\u70B9-1" tabindex="-1">\u7F3A\u70B9 <a class="header-anchor" href="#\u7F3A\u70B9-1" aria-hidden="true">#</a></h5><ul><li>JSONP\u7684\u4E3B\u8981\u4F18\u52BF\u5728\u4E8E\u5BF9\u6D4F\u89C8\u5668\u7684\u652F\u6301\u8F83\u597D\uFF1B\u867D\u7136\u76EE\u524D\u4E3B\u6D41\u6D4F\u89C8\u5668\u652F\u6301CORS\uFF0C\u4F46IE10\u4EE5\u4E0B\u4E0D\u652F\u6301CORS\u3002</li><li>\u590D\u6742\u8BF7\u6C42\u7684\u65F6\u5019\u5F97\u5148\u505A\u4E2A\u9884\u68C0\uFF0C\u518D\u53D1\u771F\u5B9E\u7684\u8BF7\u6C42\u3002\u53D1\u4E86\u4E24\u6B21\u8BF7\u6C42\u4F1A\u6709\u6027\u80FD\u4E0A\u7684\u635F\u8017\u3002</li></ul><h5 id="\u9002\u7528\u573A\u666F-1" tabindex="-1">\u9002\u7528\u573A\u666F <a class="header-anchor" href="#\u9002\u7528\u573A\u666F-1" aria-hidden="true">#</a></h5><p>\u9002\u5408\u4E00\u4E9B\u590D\u6742\u8BF7\u6C42\u7684\u573A\u666F</p><h2 id="iframe\u7CFB\u5217" tabindex="-1">iframe\u7CFB\u5217 <a class="header-anchor" href="#iframe\u7CFB\u5217" aria-hidden="true">#</a></h2><h5 id="\u5B9E\u73B0\u539F\u7406-2" tabindex="-1">\u5B9E\u73B0\u539F\u7406 <a class="header-anchor" href="#\u5B9E\u73B0\u539F\u7406-2" aria-hidden="true">#</a></h5><ul><li>document.domain+iframe \u901A\u8FC7document.domain+iframe\u6765\u8DE8\u5B50\u57DF(\u53EA\u6709\u5728<strong>\u4E3B\u57DF\u76F8\u540C</strong>\u7684\u65F6\u5019\u624D\u80FD\u4F7F\u7528\u8BE5\u65B9\u6CD5)\u3002\u4E24\u4E2A\u9875\u9762\u90FD\u901A\u8FC7js\u5F3A\u5236\u8BBE\u7F6Edocument.domain\u4E3A\u57FA\u7840\u4E3B\u57DF\uFF0C\u5C31\u5B9E\u73B0\u4E86\u540C\u57DF\u3002</li><li>window.name+iframe \u8BE5\u5C5E\u6027\u6709\u4E2A\u7279\u6027\u5728\u4E00\u4E2A\u7A97\u53E3\u7684\u751F\u547D\u5468\u671F\u5185\uFF0C<a href="http://xn--window-9m7iglza47jm1qeex25a4m8c98ovn2drqorx2gim5aere.name" target="_blank" rel="noopener noreferrer">\u7A97\u53E3\u4E2D\u8F7D\u5165\u7684\u6240\u6709\u9875\u9762\u5171\u4EAB\u4E00\u4E2Awindow.name</a>\uFF0C\u6BCF\u4E2A\u9875\u9762\u5BF9window.name\u90FD\u6709\u8BFB\u5199\u7684\u6743\u9650\u3002\u53EF\u4EE5\u901A\u8FC7window.name+iframe\u6765\u8FDB\u884C\u8DE8\u57DF.</li><li>location.hash+iframe a\u6B32\u4E0Eb\u8DE8\u57DF\u76F8\u4E92\u901A\u4FE1\uFF0C\u901A\u8FC7\u4E2D\u95F4\u9875c\u6765\u5B9E\u73B0\u3002 \u4E09\u4E2A\u9875\u9762\uFF0C\u4E0D\u540C\u57DF\u4E4B\u95F4\u5229\u7528iframe\u7684location.hash\u4F20\u503C\uFF0C\u76F8\u540C\u57DF\u4E4B\u95F4\u76F4\u63A5js\u8BBF\u95EE\u6765\u901A\u4FE1\u3002</li></ul><h5 id="\u793A\u4F8B\u4EE3\u7801-1" tabindex="-1">\u793A\u4F8B\u4EE3\u7801 <a class="header-anchor" href="#\u793A\u4F8B\u4EE3\u7801-1" aria-hidden="true">#</a></h5><ul><li><strong>document.domain+iframe</strong></li></ul><div class="language-javascript"><span class="copy"></span><pre><code><span class="line"><span style="color:#676E95;font-style:italic;">// \u7236\u7A97\u53E3 http://www.domain.com/a.html</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">iframe</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">id</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">iframe</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">src</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">http://child.domain.com/b.html</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;&lt;/</span><span style="color:#F07178;">iframe</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">script</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    document.domain = &#39;domain.com&#39;;</span></span>
<span class="line"><span style="color:#A6ACCD;">    var user = &#39;admin&#39;;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">script</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span></code></pre></div><div class="language-javascript"><span class="copy"></span><pre><code><span class="line"><span style="color:#676E95;font-style:italic;">// \u5B50\u7A97\u53E3 http://www.domain.com/b.html</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">script</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    document.domain = &#39;domain.com&#39;;</span></span>
<span class="line"><span style="color:#A6ACCD;">    // \u83B7\u53D6\u7236\u7A97\u53E3\u4E2D\u53D8\u91CF</span></span>
<span class="line"><span style="color:#A6ACCD;">    alert(&#39;get js data from parent ---&gt; &#39; + window.parent.user);</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">script</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span></code></pre></div><ul><li><strong>window.name+iframe</strong></li></ul><div class="language-javascript"><span class="copy"></span><pre><code><span class="line"><span style="color:#676E95;font-style:italic;">//http://www.domain1.com/a.html</span></span>
<span class="line"><span style="color:#C792EA;">var</span><span style="color:#A6ACCD;"> proxy </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">url</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> callback</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">var</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">state</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">var</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">iframe</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">document</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">createElement</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">iframe</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// \u52A0\u8F7D\u8DE8\u57DF\u9875\u9762</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">iframe</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">src</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">url</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// onload\u4E8B\u4EF6\u4F1A\u89E6\u53D12\u6B21\uFF0C\u7B2C1\u6B21\u52A0\u8F7D\u8DE8\u57DF\u9875\uFF0C\u5E76\u7559\u5B58\u6570\u636E\u4E8Ewindow.name</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">iframe</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">onload</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">function</span><span style="color:#89DDFF;">()</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">state</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">===</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">1</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">            </span><span style="color:#676E95;font-style:italic;">// \u7B2C2\u6B21onload(\u540C\u57DFproxy\u9875)\u6210\u529F\u540E\uFF0C\u8BFB\u53D6\u540C\u57DFwindow.name\u4E2D\u6570\u636E</span></span>
<span class="line"><span style="color:#F07178;">            </span><span style="color:#82AAFF;">callback</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">iframe</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">contentWindow</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">name</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">            </span><span style="color:#82AAFF;">destoryFrame</span><span style="color:#F07178;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">else</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">state</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">===</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">0</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">            </span><span style="color:#676E95;font-style:italic;">// \u7B2C1\u6B21onload(\u8DE8\u57DF\u9875)\u6210\u529F\u540E\uFF0C\u5207\u6362\u5230\u540C\u57DF\u4EE3\u7406\u9875\u9762</span></span>
<span class="line"><span style="color:#F07178;">            </span><span style="color:#A6ACCD;">iframe</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">contentWindow</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">location</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">http://www.domain1.com/proxy.html</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">            </span><span style="color:#A6ACCD;">state</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">};</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">document</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">body</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">appendChild</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">iframe</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// \u83B7\u53D6\u6570\u636E\u4EE5\u540E\u9500\u6BC1\u8FD9\u4E2Aiframe\uFF0C\u91CA\u653E\u5185\u5B58\uFF1B\u8FD9\u4E5F\u4FDD\u8BC1\u4E86\u5B89\u5168\uFF08\u4E0D\u88AB\u5176\u4ED6\u57DFframe js\u8BBF\u95EE\uFF09</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">function</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">destoryFrame</span><span style="color:#89DDFF;">()</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#A6ACCD;">iframe</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">contentWindow</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">document</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">write</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;&#39;</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#A6ACCD;">iframe</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">contentWindow</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">close</span><span style="color:#F07178;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#A6ACCD;">document</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">body</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">removeChild</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">iframe</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">};</span></span>
<span class="line"></span></code></pre></div><p>==\u4E2D\u95F4\u4EE3\u7406\u9875==\uFF1A<a href="http://www.domain1.com/proxy.html" target="_blank" rel="noopener noreferrer">http://www.domain1.com/proxy.html</a> \u4E0Ea.html\u540C\u57DF\uFF0C\u5185\u5BB9\u4E3A\u7A7A\u5373\u53EF\u3002</p><div class="language-javascript"><span class="copy"></span><pre><code><span class="line"><span style="color:#676E95;font-style:italic;">//http://www.domain2.com/b.html</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">script</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    window.name = &#39;This is domain2 data!&#39;;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">script</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span></code></pre></div><ul><li><strong>location.hash+iframe</strong> \u5177\u4F53\u5B9E\u73B0\uFF1AA\u57DF\uFF1Aa.html -&gt; B\u57DF\uFF1Ab.html -&gt; A\u57DF\uFF1Ac.html\uFF0Ca\u4E0Eb\u4E0D\u540C\u57DF\u53EA\u80FD\u901A\u8FC7hash\u503C\u5355\u5411\u901A\u4FE1\uFF0Cb\u4E0Ec\u4E5F\u4E0D\u540C\u57DF\u4E5F\u53EA\u80FD\u5355\u5411\u901A\u4FE1\uFF0C\u4F46c\u4E0Ea\u540C\u57DF\uFF0C\u6240\u4EE5c\u53EF\u901A\u8FC7parent.parent\u8BBF\u95EEa\u9875\u9762\u6240\u6709\u5BF9\u8C61\u3002</li></ul><div class="language-javascript"><span class="copy"></span><pre><code><span class="line"><span style="color:#676E95;font-style:italic;">//http://www.domain1.com/a.html</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">iframe</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">id</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">iframe</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">src</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">http://www.domain2.com/b.html</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">style</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">display:none;</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;&lt;/</span><span style="color:#F07178;">iframe</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">script</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    var iframe = document.getElementById(&#39;iframe&#39;);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    // \u5411b.html\u4F20hash\u503C</span></span>
<span class="line"><span style="color:#A6ACCD;">    setTimeout(function() </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        iframe</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">src </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> iframe</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">src </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">#user=admin</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">, 1000);</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span></span>
<span class="line"><span style="color:#A6ACCD;">    // \u5F00\u653E\u7ED9\u540C\u57DFc.html\u7684\u56DE\u8C03\u65B9\u6CD5</span></span>
<span class="line"><span style="color:#A6ACCD;">    function onCallback(res) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#82AAFF;">alert</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">data from c.html ---&gt; </span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> res);</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">script</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span></code></pre></div><div class="language-javascript"><span class="copy"></span><pre><code><span class="line"><span style="color:#676E95;font-style:italic;">//http://www.domain2.com/b.html</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">iframe</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">id</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">iframe</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">src</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">http://www.domain1.com/c.html</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">style</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">display:none;</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;&lt;/</span><span style="color:#F07178;">iframe</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">script</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    var iframe = document.getElementById(&#39;iframe&#39;);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    // \u76D1\u542Ca.html\u4F20\u6765\u7684hash\u503C\uFF0C\u518D\u4F20\u7ED9c.html</span></span>
<span class="line"><span style="color:#A6ACCD;">    window.onhashchange = function () </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        iframe</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">src </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> iframe</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">src </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> location</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">hash;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">script</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span></code></pre></div><div class="language-javascript"><span class="copy"></span><pre><code><span class="line"><span style="color:#676E95;font-style:italic;">//http://www.domain1.com/c.html</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">script</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    // \u76D1\u542Cb.html\u4F20\u6765\u7684hash\u503C</span></span>
<span class="line"><span style="color:#A6ACCD;">    window.onhashchange = function () </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;font-style:italic;">// \u518D\u901A\u8FC7\u64CD\u4F5C\u540C\u57DFa.html\u7684js\u56DE\u8C03\uFF0C\u5C06\u7ED3\u679C\u4F20\u56DE</span></span>
<span class="line"><span style="color:#A6ACCD;">        window</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">parent</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">parent</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">onCallback</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">hello: </span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> location</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">hash</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">replace</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">#user=</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;&#39;</span><span style="color:#A6ACCD;">));</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">script</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span></code></pre></div><h5 id="\u4F18\u70B9-2" tabindex="-1">\u4F18\u70B9 <a class="header-anchor" href="#\u4F18\u70B9-2" aria-hidden="true">#</a></h5><p>iframe\u7684\u4F18\u70B9\uFF1A 1.iframe\u80FD\u591F\u539F\u5C01\u4E0D\u52A8\u7684\u628A\u5D4C\u5165\u7684\u7F51\u9875\u5C55\u73B0\u51FA\u6765\u3002 2.\u5982\u679C\u6709\u591A\u4E2A\u7F51\u9875\u5F15\u7528iframe\uFF0C\u90A3\u4E48\u4F60\u53EA\u9700\u8981\u4FEE\u6539iframe\u7684\u5185\u5BB9\uFF0C\u5C31\u53EF\u4EE5\u5B9E\u73B0\u8C03\u7528\u7684\u6BCF\u4E00\u4E2A\u9875\u9762\u5185\u5BB9\u7684\u66F4\u6539\uFF0C\u65B9\u4FBF\u5FEB\u6377\u3002 3.\u7F51\u9875\u5982\u679C\u4E3A\u4E86\u7EDF\u4E00\u98CE\u683C\uFF0C\u5934\u90E8\u548C\u7248\u672C\u90FD\u662F\u4E00\u6837\u7684\uFF0C\u5C31\u53EF\u4EE5\u5199\u6210\u4E00\u4E2A\u9875\u9762\uFF0C\u7528iframe\u6765\u5D4C\u5957\uFF0C\u53EF\u4EE5\u589E\u52A0\u4EE3\u7801\u7684\u53EF\u91CD\u7528\u3002 4.\u5982\u679C\u9047\u5230\u52A0\u8F7D\u7F13\u6162\u7684\u7B2C\u4E09\u65B9\u5185\u5BB9\u5982\u56FE\u6807\u548C\u5E7F\u544A\uFF0C\u8FD9\u4E9B\u95EE\u9898\u53EF\u4EE5\u7531iframe\u6765\u89E3\u51B3\u3002 5.\u53EF\u4EE5\u7528\u4F5C\u5B89\u5168\u6C99\u7BB1 6.\u5E76\u884C\u52A0\u8F7D\u811A\u672C</p><h5 id="\u7F3A\u70B9-2" tabindex="-1">\u7F3A\u70B9 <a class="header-anchor" href="#\u7F3A\u70B9-2" aria-hidden="true">#</a></h5><p>iframe\u7684\u7F3A\u70B9\uFF1A 1.\u963B\u585E\u9875\u9762\u7684onload\u4E8B\u4EF6\u3002\u5373\u4F7F\u5185\u5BB9\u4E3A\u7A7A\u52A0\u8F7D\u4E5F\u9700\u8981\u65F6\u95F4\u3002\u6CA1\u6709\u8BED\u4E49\u3002 2.\u4F1A\u4EA7\u751F\u5F88\u591A\u9875\u9762\uFF0C\u4E0D\u5BB9\u6613\u7BA1\u7406\u3002iframe\u6846\u67B6\u7ED3\u6784\u6709\u65F6\u4F1A\u8BA9\u4EBA\u611F\u5230\u8FF7\u60D1\uFF0C\u5982\u679C\u6846\u67B6\u4E2A\u6570\u591A\u7684\u8BDD\uFF0C\u53EF\u80FD\u4F1A\u51FA\u73B0\u4E0A\u4E0B\u3001\u5DE6\u53F3\u6EDA\u52A8\u6761\uFF0C\u4F1A\u5206\u6563\u8BBF\u95EE\u8005\u7684\u6CE8\u610F\u529B\uFF0C\u7528\u6237\u4F53\u9A8C\u5EA6\u5DEE\u3002 3.\u4EE3\u7801\u590D\u6742\uFF0C\u65E0\u6CD5\u88AB\u4E00\u4E9B\u641C\u7D22\u5F15\u64CE\u7D22\u5F15\u5230\uFF0C\u8FD9\u4E00\u70B9\u5F88\u5173\u952E\uFF0C\u73B0\u5728\u7684\u641C\u7D22\u5F15\u64CE\u722C\u866B\u8FD8\u4E0D\u80FD\u5F88\u597D\u7684\u5904\u7406iframe\u4E2D\u7684\u5185\u5BB9\uFF0C\u6240\u4EE5\u4F7F\u7528iframe\u4F1A\u4E0D\u5229\u4E8E\u641C\u7D22\u5F15\u64CE\u4F18\u5316\u3002 4.\u5F88\u591A\u7684\u79FB\u52A8\u8BBE\u5907\uFF08PDA \u624B\u673A\uFF09\u65E0\u6CD5\u5B8C\u5168\u663E\u793A\u6846\u67B6\uFF0C\u8BBE\u5907\u517C\u5BB9\u6027\u5DEE\u3002 5.iframe\u6846\u67B6\u9875\u9762\u4F1A\u589E\u52A0\u670D\u52A1\u5668\u7684http\u8BF7\u6C42\uFF0C\u5BF9\u4E8E\u5927\u578B\u7F51\u7AD9\u662F\u4E0D\u53EF\u53D6\u7684\u3002</p><blockquote><p>\u4E2A\u4EBA\u4E0D\u662F\u5F88\u63A8\u8350\u4F7F\u7528iframe,\u4E4B\u524D\u81EA\u5DF1\u8BD5\u8FC7\u7528iframe\u5D4C\u5165\u9875\u9762\uFF0C\u4E25\u91CD\u5F71\u54CD\u7F51\u7AD9\u6027\u80FD\uFF0C\u975E\u5E38\u5361\uFF0Cloading\u65F6\u95F4\u5F88\u957F\u3002</p></blockquote><h2 id="postmessage" tabindex="-1">postMessage <a class="header-anchor" href="#postmessage" aria-hidden="true">#</a></h2><h5 id="\u5B9E\u73B0\u539F\u7406-3" tabindex="-1">\u5B9E\u73B0\u539F\u7406 <a class="header-anchor" href="#\u5B9E\u73B0\u539F\u7406-3" aria-hidden="true">#</a></h5><p>postMessage\u662FHTML5 XMLHttpRequest Level 2\u4E2D\u7684API\u4E14\u662F\u4E3A\u6570\u4E0D\u591A\u53EF\u8DE8\u57DF\u64CD\u4F5C\u7684window\u5C5E\u6027\u4E4B\u4E00\u3002</p><p>\u7528\u6CD5\uFF1ApostMessage(data,origin)\u65B9\u6CD5\u63A5\u53D7\u4E24\u4E2A\u53C2\u6570 data\uFF1A html5\u89C4\u8303\u652F\u6301\u4EFB\u610F\u57FA\u672C\u7C7B\u578B\u6216\u53EF\u590D\u5236\u7684\u5BF9\u8C61\uFF0C\u4F46\u90E8\u5206\u6D4F\u89C8\u5668\u53EA\u652F\u6301\u5B57\u7B26\u4E32\uFF0C\u6240\u4EE5\u4F20\u53C2\u65F6\u6700\u597D\u7528JSON.stringify()\u5E8F\u5217\u5316\u3002 origin\uFF1A \u534F\u8BAE+\u4E3B\u673A+\u7AEF\u53E3\u53F7\uFF0C\u4E5F\u53EF\u4EE5\u8BBE\u7F6E\u4E3A&quot;*&quot;\uFF0C\u8868\u793A\u53EF\u4EE5\u4F20\u9012\u7ED9\u4EFB\u610F\u7A97\u53E3\uFF0C\u5982\u679C\u8981\u6307\u5B9A\u548C\u5F53\u524D\u7A97\u53E3\u540C\u6E90\u7684\u8BDD\u8BBE\u7F6E\u4E3A&quot;/&quot;\u3002</p><h5 id="\u793A\u4F8B\u4EE3\u7801-2" tabindex="-1">\u793A\u4F8B\u4EE3\u7801 <a class="header-anchor" href="#\u793A\u4F8B\u4EE3\u7801-2" aria-hidden="true">#</a></h5><div class="language-javascript"><span class="copy"></span><pre><code><span class="line"><span style="color:#676E95;font-style:italic;">//a.html\uFF1A(http://www.domain1.com/a.html)</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">iframe</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">id</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">iframe</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">src</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">http://www.domain2.com/b.html</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">style</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">display:none;</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;&lt;/</span><span style="color:#F07178;">iframe</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">script</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">       </span></span>
<span class="line"><span style="color:#A6ACCD;">    var iframe = document.getElementById(&#39;iframe&#39;);</span></span>
<span class="line"><span style="color:#A6ACCD;">    iframe.onload = function() </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        var data </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#F07178;">name</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">aym</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;font-style:italic;">// \u5411domain2\u4F20\u9001\u8DE8\u57DF\u6570\u636E</span></span>
<span class="line"><span style="color:#A6ACCD;">        iframe</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">contentWindow</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">postMessage</span><span style="color:#A6ACCD;">(JSON</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">stringify</span><span style="color:#A6ACCD;">(data)</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">http://www.domain2.com</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    // \u63A5\u53D7domain2\u8FD4\u56DE\u6570\u636E</span></span>
<span class="line"><span style="color:#A6ACCD;">    window.addEventListener(&#39;message&#39;, function(e) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#82AAFF;">alert</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">data from domain2 ---&gt; </span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> e</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">data);</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">, false);</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">script</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span></code></pre></div><div class="language-javascript"><span class="copy"></span><pre><code><span class="line"><span style="color:#676E95;font-style:italic;">// b.html\uFF1A(http://www.domain2.com/b.html)</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">script</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    // \u63A5\u6536domain1\u7684\u6570\u636E</span></span>
<span class="line"><span style="color:#A6ACCD;">    window.addEventListener(&#39;message&#39;, function(e) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#82AAFF;">alert</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">data from domain1 ---&gt; </span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> e</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">data);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">        var data </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> JSON</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">parse</span><span style="color:#A6ACCD;">(e</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">data);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#82AAFF;">if</span><span style="color:#A6ACCD;"> (data) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">            data.number </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">16</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">            </span><span style="color:#676E95;font-style:italic;">// \u5904\u7406\u540E\u518D\u53D1\u56DEdomain1</span></span>
<span class="line"><span style="color:#A6ACCD;">            window.parent.postMessage(JSON.stringify(data)</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">http://www.domain1.com</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">);</span></span>
<span class="line"><span style="color:#F07178;">        }</span></span>
<span class="line"><span style="color:#F07178;">    }, false);</span></span>
<span class="line"><span style="color:#F07178;">&lt;/script&gt;</span></span>
<span class="line"></span></code></pre></div><h5 id="\u4F18\u70B9-3" tabindex="-1">\u4F18\u70B9 <a class="header-anchor" href="#\u4F18\u70B9-3" aria-hidden="true">#</a></h5><p>\u65B9\u4FBF\uFF0C\u5B89\u5168\uFF0C\u6709\u6548\u7684\u89E3\u51B3\u4E86\u8DE8\u57DF\u95EE\u9898</p><h5 id="\u7F3A\u70B9-3" tabindex="-1">\u7F3A\u70B9 <a class="header-anchor" href="#\u7F3A\u70B9-3" aria-hidden="true">#</a></h5><p>ie8+\u624D\u652F\u6301\uFF0C\u800C\u4E14ie8+&lt;ie10\u53EA\u652F\u6301iframe\u7684\u65B9\u5F0F\u3002</p><h5 id="\u9002\u7528\u573A\u666F-2" tabindex="-1">\u9002\u7528\u573A\u666F <a class="header-anchor" href="#\u9002\u7528\u573A\u666F-2" aria-hidden="true">#</a></h5><ul><li>\u9875\u9762\u548C\u5176\u6253\u5F00\u7684\u65B0\u7A97\u53E3\u7684\u6570\u636E\u4F20\u9012</li><li>\u591A\u7A97\u53E3\u4E4B\u95F4\u7684\u6D88\u606F\u4F20\u9012</li><li>\u9875\u9762\u4E0E\u5D4C\u5957\u7684iframe\u6D88\u606F\u4F20\u9012</li><li>\u4E0A\u8FF0\u4E09\u4E2A\u573A\u666F\u7684\u8DE8\u57DF\u7684\u6570\u636E\u4F20\u9012</li></ul><h2 id="websocket\u534F\u8BAE\u8DE8\u57DF" tabindex="-1">WebSocket\u534F\u8BAE\u8DE8\u57DF <a class="header-anchor" href="#websocket\u534F\u8BAE\u8DE8\u57DF" aria-hidden="true">#</a></h2><h5 id="\u5B9E\u73B0\u539F\u7406-4" tabindex="-1">\u5B9E\u73B0\u539F\u7406 <a class="header-anchor" href="#\u5B9E\u73B0\u539F\u7406-4" aria-hidden="true">#</a></h5><p>WebSocket protocol\u662FHTML5\u4E00\u79CD\u65B0\u7684\u534F\u8BAE\u3002\u5B83\u5B9E\u73B0\u4E86\u6D4F\u89C8\u5668\u4E0E\u670D\u52A1\u5668\u5168\u53CC\u5DE5\u901A\u4FE1\uFF0C\u540C\u65F6\u5141\u8BB8\u8DE8\u57DF\u901A\u8BAF\uFF0C\u662Fserver push\u6280\u672F\u7684\u4E00\u79CD\u5F88\u597D\u7684\u5B9E\u73B0\u3002 \u539F\u751FWebSocket API\u4F7F\u7528\u8D77\u6765\u4E0D\u592A\u65B9\u4FBF\uFF0C<a href="http://xn--Socket-hz8ig3bo82im51b.io" target="_blank" rel="noopener noreferrer">\u6211\u4EEC\u4F7F\u7528Socket.io</a>\uFF0C\u5B83\u5F88\u597D\u5730\u5C01\u88C5\u4E86webSocket\u63A5\u53E3\uFF0C\u63D0\u4F9B\u4E86\u66F4\u7B80\u5355\u3001\u7075\u6D3B\u7684\u63A5\u53E3\uFF0C\u4E5F\u5BF9\u4E0D\u652F\u6301webSocket\u7684\u6D4F\u89C8\u5668\u63D0\u4F9B\u4E86\u5411\u4E0B\u517C\u5BB9\u3002</p><h5 id="\u793A\u4F8B\u4EE3\u7801-3" tabindex="-1">\u793A\u4F8B\u4EE3\u7801 <a class="header-anchor" href="#\u793A\u4F8B\u4EE3\u7801-3" aria-hidden="true">#</a></h5><div class="language-javascript"><span class="copy"></span><pre><code><span class="line"><span style="color:#676E95;font-style:italic;">//\u524D\u7AEF\u4EE3\u7801</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">div</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">user input\uFF1A</span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">input</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">type</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">text</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;&lt;/</span><span style="color:#F07178;">div</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">script</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">src</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">https://cdn.bootcss.com/socket.io/2.2.0/socket.io.js</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;&lt;/</span><span style="color:#F07178;">script</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">script</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">var socket = io(&#39;http://www.domain2.com:8080&#39;);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">// \u8FDE\u63A5\u6210\u529F\u5904\u7406</span></span>
<span class="line"><span style="color:#A6ACCD;">socket.on(&#39;connect&#39;, function() </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// \u76D1\u542C\u670D\u52A1\u7AEF\u6D88\u606F</span></span>
<span class="line"><span style="color:#A6ACCD;">    socket</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">on</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">message</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">msg</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">data from server: ---&gt; </span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">+</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">msg</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// \u76D1\u542C\u670D\u52A1\u7AEF\u5173\u95ED</span></span>
<span class="line"><span style="color:#A6ACCD;">    socket</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">on</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">disconnect</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Server socket has closed.</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">);</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">document.getElementsByTagName(&#39;input&#39;)[0].onblur = function() </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    socket</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">send</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">value);</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">script</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span></code></pre></div><div class="language-javascript"><span class="copy"></span><pre><code><span class="line"><span style="color:#676E95;font-style:italic;">//NodeJS socket\u540E\u53F0</span></span>
<span class="line"><span style="color:#C792EA;">var</span><span style="color:#A6ACCD;"> http </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">require</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">http</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#C792EA;">var</span><span style="color:#A6ACCD;"> socket </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">require</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">socket.io</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// \u542Fhttp\u670D\u52A1</span></span>
<span class="line"><span style="color:#C792EA;">var</span><span style="color:#A6ACCD;"> server </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> http</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">createServer</span><span style="color:#A6ACCD;">(</span><span style="color:#C792EA;">function</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">req</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> res</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">res</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">writeHead</span><span style="color:#F07178;">(</span><span style="color:#F78C6C;">200</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">Content-type</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">text/html</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">res</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">end</span><span style="color:#F07178;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">server</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">listen</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">8080</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Server is running at port 8080...</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// \u76D1\u542Csocket\u8FDE\u63A5</span></span>
<span class="line"><span style="color:#A6ACCD;">socket</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">listen</span><span style="color:#A6ACCD;">(server)</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">on</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">connection</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">client</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// \u63A5\u6536\u4FE1\u606F</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">client</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">on</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">message</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">function</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">msg</span><span style="color:#89DDFF;">)</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#A6ACCD;">client</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">send</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">hello\uFF1A</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">+</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">msg</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">data from client: ---&gt; </span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">+</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">msg</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// \u65AD\u5F00\u5904\u7406</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">client</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">on</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">disconnect</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">function</span><span style="color:#89DDFF;">()</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Client socket has closed.</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><h2 id="\u670D\u52A1\u7AEF\u8BBE\u7F6E\u4EE3\u7406\u6A21\u5757" tabindex="-1">\u670D\u52A1\u7AEF\u8BBE\u7F6E\u4EE3\u7406\u6A21\u5757 <a class="header-anchor" href="#\u670D\u52A1\u7AEF\u8BBE\u7F6E\u4EE3\u7406\u6A21\u5757" aria-hidden="true">#</a></h2><p>\u8FD9\u5757\u4E0D\u662F\u5F88\u61C2\uFF0C\u770B\u5230\u535A\u5BA2\u4E0A\u7684\u63D0\u5230\u4E86\uFF0C\u7B49\u6211\u5F04\u660E\u767D\u4E86\u540E\u7EED\u518D\u8865\u5145</p><h2 id="\u4F7F\u7528flash\u8DE8\u57DF" tabindex="-1">\u4F7F\u7528Flash\u8DE8\u57DF <a class="header-anchor" href="#\u4F7F\u7528flash\u8DE8\u57DF" aria-hidden="true">#</a></h2><p>\u975E\u5E38\u53E4\u8001\u7684Flash\u4EE3\u7406\u8DE8\u57DF\uFF0C\u4E4B\u524D\u4ECE\u6765\u6CA1\u542C\u8BF4\u8FC7\uFF0C\u8FD8\u662F\u770B\u535A\u5BA2\u5076\u7136\u770B\u5230\uFF0C\u73B0\u5728\u57FA\u672C\u6CA1\u4EBA\u7528\u4E86\uFF0C\u6211\u4E5F\u5C31\u4E0D\u7BA1\u4E86\uFF0C\u4E5F\u4E0D\u77E5\u9053\u5230\u5E95\u5565\u539F\u7406\uFF0C\u4E4B\u540E\u770B\u5230\u518D\u8865\u5145\u5427\u3002</p><p>\u53C2\u8003\u535A\u5BA2 <a href="https://www.cnblogs.com/jing-tian/p/11006271.html" target="_blank" rel="noopener noreferrer">\u524D\u7AEF\u5E38\u89C1\u8DE8\u57DF\u89E3\u51B3\u65B9\u6848\uFF08\u5168\uFF09</a><a href="https://www.cnblogs.com/596014054-yangdongsheng/p/10228859.html" target="_blank" rel="noopener noreferrer">\u89E3\u51B3\u8DE8\u57DF\uFF08CORS\uFF09\u95EE\u9898</a><a href="https://www.jianshu.com/p/cf67f5d583c8" target="_blank" rel="noopener noreferrer">iframe\u4ECB\u7ECD\u3001\u57FA\u672C\u5C5E\u6027\u3001\u8DE8\u57DF\u901A\u8BAF\u3001\u4F18\u7F3A\u70B9</a><a href="https://www.cnblogs.com/smiler/p/5829621.html" target="_blank" rel="noopener noreferrer">web\u8DE8\u57DF\u89E3\u51B3\u65B9\u6848</a></p>`,84),e=[o];function t(c,r,F,D,y,i){return n(),a("div",null,e)}var d=s(p,[["render",t]]);export{C as __pageData,d as default};
