import{_ as s,c as a,o as i,R as l}from"./chunks/framework.BmksyVjO.js";const n="/assets/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20240226192534.B624RZHa.png",t="/assets/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20240226113655.B7XRAUJT.png",e="/assets/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20240226135442.BaV3sdN5.png",h="/assets/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20240226151505.CywgB2IK.png",p="/assets/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20240226151921.CRKca1AH.png",o="/assets/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20240226155233.CrI0CoDP.png",A=JSON.parse('{"title":"","description":"","frontmatter":{},"headers":[],"relativePath":"frontend/06前端基建&工程化/使用volta改善前端node版本管理.md","filePath":"frontend/06前端基建&工程化/使用volta改善前端node版本管理.md"}'),k={name:"frontend/06前端基建&工程化/使用volta改善前端node版本管理.md"},d=l('<h2 id="nvm场景痛点" tabindex="-1">nvm场景痛点 <a class="header-anchor" href="#nvm场景痛点" aria-label="Permalink to &quot;nvm场景痛点&quot;">​</a></h2><ul><li>常见场景：比如某个Vue2项目依赖的node版本是node14，某个Vue3项目依赖的node版本时node18，两个项目同时都在开发，此时，这两个项目每次运行前都需要<code>nvm use</code>来手动切换版本，针对多项目同时开发的场景还是比较麻烦的，忘记切换运行就会报错。</li></ul><p><img src="'+n+`" alt=""></p><ul><li>volta则可以较好解决这个问题，同时也支持对node版本的管理。</li></ul><h2 id="安装-使用" tabindex="-1">安装&amp;使用 <a class="header-anchor" href="#安装-使用" aria-label="Permalink to &quot;安装&amp;使用&quot;">​</a></h2><h3 id="volta安装" tabindex="-1">volta安装 <a class="header-anchor" href="#volta安装" aria-label="Permalink to &quot;volta安装&quot;">​</a></h3><ul><li>首先确保nvm版本管理器&amp;node环境卸载干净</li></ul><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">nvm list </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 1.列出所有这些包</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">nvm uninstall v18.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">19.0</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> // 2.挨个卸载已安装的所有node包</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">C</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:\\Users\\</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">YOUR</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> USER</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">\\AppData\\Roaming\\nvm </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 3.卸载所有包后进入到nvm目录，在这个目录下会看到 unins***.exe，双击执行卸载nvm</span></span></code></pre></div><p><img src="`+t+'" alt=""></p><ul><li>Windows系统下，先下载 <a href="https://github.com/volta-cli/volta/releases/download/v1.0.6/volta-1.0.6-windows-x86_64.msi" target="_blank" rel="noreferrer">vlota安装包</a>，然后双击安装包按照提示一路next下去即可，命令行检查一下安装成功没有</li></ul><p><img src="'+e+`" alt=""></p><h3 id="volta安装node" tabindex="-1">volta安装node <a class="header-anchor" href="#volta安装node" aria-label="Permalink to &quot;volta安装node&quot;">​</a></h3><ul><li>根目录打开命令行终端，使用以下命令安装需要的node版本，</li></ul><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">volta install node@latest </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//安装最新版本</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">volta install node@</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">18.19</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> //安装指定版本</span></span></code></pre></div><ul><li>可多次安装，如果安装了会直接切换，没有安装的会先下载安装，最新安装的node版本即全局默认版本, 可以使用<code>volta install</code>来切换我们默认的node版本</li></ul><blockquote><p>注意： 使用install安装时，由于下载的是远端node进行安装，可能会安装过慢或者是安装失败，需要多试几次</p></blockquote><h4 id="解决install安装过慢或失败的问题" tabindex="-1">解决install安装过慢或失败的问题 <a class="header-anchor" href="#解决install安装过慢或失败的问题" aria-label="Permalink to &quot;解决install安装过慢或失败的问题&quot;">​</a></h4><ul><li><p>如果总是安装失败，建议本地安装</p><ul><li>可以到<a href="https://registry.npmmirror.com/binary.html?path=node/" target="_blank" rel="noreferrer">官方node安装包下载</a>指定node包文件夹</li></ul><p><img src="`+h+'" alt=""></p><ul><li>点进去之后，windows系统的下载windows的包</li></ul></li></ul><p><img src="'+p+'" alt=""></p><ul><li><p>下载完成之后将安装包解压重命名放到该安装目录下</p><p><img src="'+o+`" alt=""></p><ul><li>直接在命令行终端执行安装命令</li></ul></li></ul><h4 id="查看已安装的node环境" tabindex="-1">查看已安装的node环境 <a class="header-anchor" href="#查看已安装的node环境" aria-label="Permalink to &quot;查看已安装的node环境&quot;">​</a></h4><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">volta list </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 查看当前环境依赖</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">volta list all </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 查看所有环境依赖</span></span></code></pre></div><h3 id="项目特定版本切换" tabindex="-1">项目特定版本切换 <a class="header-anchor" href="#项目特定版本切换" aria-label="Permalink to &quot;项目特定版本切换&quot;">​</a></h3><ul><li>项目特定版本可以到项目中进行相应设置，去项目所在目录执行命令</li></ul><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">volta pin node@</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">18</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> // volta会帮助我们找18中最合适的版本</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">volta pin node@</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">18.19</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> // 如果想使用我们安装的版本，必须把版本号写全</span></span></code></pre></div><ul><li>此时我们的项目<code>package.json</code>中会多一个配置</li></ul><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;volta&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &quot;node&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;18.19.0&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><ul><li>当我们给多个项目设置好volta的配置之后，我们后面就不需要再做版本切换了，你运行哪个项目，volta就会帮助你无缝切换到对应的版本</li></ul><h2 id="volta协作" tabindex="-1">volta协作 <a class="header-anchor" href="#volta协作" aria-label="Permalink to &quot;volta协作&quot;">​</a></h2><ul><li>可以为协作者提供<strong>可复制的准确环境</strong>，避免记混小版本造成的麻烦。 <ul><li>首先，<code>package.json</code>中通过volta设置了环境，如果协作者没有使用volta，可以直接查看对应项目的node准确版本，然后手动切换(使用nvm或者其他的管理方式)</li><li>其次，如果协作者安装了volta，则直接运行项目，如果协作者电脑中没有对应的node环境，volta会自动帮助我们安装。</li></ul></li></ul><h2 id="volta常用命令" tabindex="-1">volta常用命令 <a class="header-anchor" href="#volta常用命令" aria-label="Permalink to &quot;volta常用命令&quot;">​</a></h2><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">volta list </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//查看当前环境的版本</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">volta list all </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//查看存在的所有版本</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">volta install node </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//安装最新版的nodejs</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">volta install node@</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">12.2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> //安装指定版本</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">volta install node@</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">12</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> //volta将选择合适的版本安装</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">volta pin node@</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10.15</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> //将更新项目的package.json文件以使用工具的选定版本</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">volta pin yarn@</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1.14</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> //将更新项目的package.json文件以使用工具的选定版本</span></span></code></pre></div>`,32),r=[d];function E(c,g,u,v,y,m){return i(),a("div",null,r)}const C=s(k,[["render",E]]);export{A as __pageData,C as default};
